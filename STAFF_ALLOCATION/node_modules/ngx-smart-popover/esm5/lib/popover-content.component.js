/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * This is a continuation of ngx-popover
 * @Reference {github} https://github.com/pleerock/ngx-popover
 */
import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, Renderer2, ViewChild } from '@angular/core';
import { PopoverPlacement } from './popover.directive';
var PopoverContentComponent = /** @class */ (function () {
    // -------------------------------------------------------------------------
    // Constructor
    // -------------------------------------------------------------------------
    function PopoverContentComponent(element, cdr, renderer) {
        var _this = this;
        this.element = element;
        this.cdr = cdr;
        this.renderer = renderer;
        this.placement = PopoverPlacement.Top;
        this.animation = true;
        this.closeOnClickOutside = false;
        this.closeOnMouseOutside = false;
        this.size = 'small';
        this.onCloseFromOutside = new EventEmitter();
        this.top = -10000;
        this.left = -10000;
        this.isIn = false;
        this.displayType = 'none';
        this.opacity = 0;
        this.transitionEnabled = false;
        this.windowWidth = window.innerWidth;
        this.windowHeight = window.innerHeight;
        // -------------------------------------------------------------------------
        // Anonymous
        // -------------------------------------------------------------------------
        /**
         * Closes dropdown if user clicks outside of this directive.
         */
        this.onDocumentMouseDown = (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var element = _this.element.nativeElement;
            if (!element || !_this.popover) {
                return;
            }
            if (element.contains(event.target) || _this.popover.getElement().contains(event.target)) {
                return;
            }
            _this.onCloseFromOutside.emit(undefined);
        });
    }
    // -------------------------------------------------------------------------
    // Lifecycle callbacks
    // -------------------------------------------------------------------------
    // -------------------------------------------------------------------------
    // Lifecycle callbacks
    // -------------------------------------------------------------------------
    /**
     * @return {?}
     */
    PopoverContentComponent.prototype.ngAfterViewInit = 
    // -------------------------------------------------------------------------
    // Lifecycle callbacks
    // -------------------------------------------------------------------------
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.closeOnClickOutside) {
            this.listenClickFunc = this.renderer.listen('document', 'mousedown', (/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return _this.onDocumentMouseDown(event); }));
        }
        if (this.closeOnMouseOutside) {
            this.listenMouseFunc = this.renderer.listen('document', 'mouseover', (/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return _this.onDocumentMouseDown(event); }));
        }
        // Always close on mobile touch event outside.
        this.listenTouchFunc = this.renderer.listen('document', 'touchstart', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) { return _this.onDocumentMouseDown(event); }));
        this.show();
        this.cdr.detectChanges();
    };
    /**
     * @return {?}
     */
    PopoverContentComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.closeOnClickOutside && this.listenClickFunc) {
            this.listenClickFunc();
        }
        if (this.closeOnMouseOutside && this.listenMouseFunc) {
            this.listenMouseFunc();
        }
        if (!!this.listenTouchFunc) {
            this.listenTouchFunc();
        }
    };
    // -------------------------------------------------------------------------
    // Public Methods
    // -------------------------------------------------------------------------
    // -------------------------------------------------------------------------
    // Public Methods
    // -------------------------------------------------------------------------
    /**
     * @return {?}
     */
    PopoverContentComponent.prototype.updatePosition = 
    // -------------------------------------------------------------------------
    // Public Methods
    // -------------------------------------------------------------------------
    /**
     * @return {?}
     */
    function () {
        // if visible, reposition
        if (this.opacity) {
            /** @type {?} */
            var p = this.positionElements(this.popover.getElement(), this.popoverDiv.nativeElement, this.placement);
            this.top = p.top;
            this.left = p.left;
        }
    };
    /**
     * @return {?}
     */
    PopoverContentComponent.prototype.show = /**
     * @return {?}
     */
    function () {
        if (!this.popover || !this.popover.getElement()) {
            return;
        }
        /** @type {?} */
        var p = this.positionElements(this.popover.getElement(), this.popoverDiv.nativeElement, this.placement);
        this.displayType = 'block';
        this.top = p.top;
        this.left = p.left;
        this.isIn = true;
        this.transitionEnabled = true;
        this.opacity = 1;
    };
    /**
     * @return {?}
     */
    PopoverContentComponent.prototype.hide = /**
     * @return {?}
     */
    function () {
        this.top = -10000;
        this.left = -10000;
        this.isIn = true;
        this.popover.hide();
    };
    /**
     * @return {?}
     */
    PopoverContentComponent.prototype.hideFromPopover = /**
     * @return {?}
     */
    function () {
        this.top = -10000;
        this.left = -10000;
        this.isIn = true;
        this.transitionEnabled = false;
        this.opacity = 0;
    };
    // -------------------------------------------------------------------------
    // Protected Methods
    // -------------------------------------------------------------------------
    // -------------------------------------------------------------------------
    // Protected Methods
    // -------------------------------------------------------------------------
    /**
     * @protected
     * @param {?} hostEl
     * @param {?} targetEl
     * @param {?} positionStr
     * @param {?=} appendToBody
     * @return {?}
     */
    PopoverContentComponent.prototype.positionElements = 
    // -------------------------------------------------------------------------
    // Protected Methods
    // -------------------------------------------------------------------------
    /**
     * @protected
     * @param {?} hostEl
     * @param {?} targetEl
     * @param {?} positionStr
     * @param {?=} appendToBody
     * @return {?}
     */
    function (hostEl, targetEl, positionStr, appendToBody) {
        if (appendToBody === void 0) { appendToBody = false; }
        /** @type {?} */
        var positionStrParts = ((/** @type {?} */ (positionStr))).split(' ');
        /** @type {?} */
        var pos0 = positionStrParts[0];
        /** @type {?} */
        var pos1 = positionStrParts[1] || 'center';
        /** @type {?} */
        var hostElPos = appendToBody ? this.offset(hostEl) : this.position(hostEl);
        /** @type {?} */
        var targetElWidth = targetEl.offsetWidth;
        /** @type {?} */
        var targetElHeight = targetEl.offsetHeight;
        this.effectivePlacement = pos0 = this.getEffectivePlacement(pos0, hostEl, targetEl);
        /** @type {?} */
        var shiftWidth = {
            center: (/**
             * @return {?}
             */
            function () {
                return hostElPos.left + hostElPos.width / 2 - targetElWidth / 2;
            }),
            left: (/**
             * @return {?}
             */
            function () {
                return hostElPos.left;
            }),
            right: (/**
             * @return {?}
             */
            function () {
                return hostElPos.left + hostElPos.width;
            }),
            topOrBottomRight: (/**
             * @return {?}
             */
            function () {
                return hostElPos.left + hostElPos.width / 2;
            }),
            topOrBottomLeft: (/**
             * @return {?}
             */
            function () {
                return hostElPos.left - targetElWidth + hostElPos.width / 2;
            })
        };
        /** @type {?} */
        var shiftHeight = {
            center: (/**
             * @return {?}
             */
            function () {
                return hostElPos.top + hostElPos.height / 2 - targetElHeight / 2;
            }),
            top: (/**
             * @return {?}
             */
            function () {
                return hostElPos.top;
            }),
            bottom: (/**
             * @return {?}
             */
            function () {
                return hostElPos.top + hostElPos.height;
            })
        };
        /** @type {?} */
        var targetElPos;
        switch (pos0) {
            case PopoverPlacement.Right:
                targetElPos = {
                    top: shiftHeight[pos1](),
                    left: shiftWidth[pos0]()
                };
                break;
            case PopoverPlacement.Left:
                targetElPos = {
                    top: shiftHeight[pos1](),
                    left: hostElPos.left - targetElWidth
                };
                break;
            case PopoverPlacement.Bottom:
                targetElPos = {
                    top: shiftHeight[pos0](),
                    left: shiftWidth[pos1]()
                };
                break;
            case PopoverPlacement.TopLeft:
                targetElPos = {
                    top: hostElPos.top - targetElHeight,
                    left: shiftWidth['topOrBottomLeft']()
                };
                break;
            case PopoverPlacement.TopRight:
                targetElPos = {
                    top: hostElPos.top - targetElHeight,
                    left: shiftWidth['topOrBottomRight']()
                };
                break;
            case PopoverPlacement.BottomLeft:
                targetElPos = {
                    top: shiftHeight[PopoverPlacement.Bottom](),
                    left: shiftWidth['topOrBottomLeft']()
                };
                break;
            case PopoverPlacement.BottomRight:
                targetElPos = {
                    top: shiftHeight[PopoverPlacement.Bottom](),
                    left: shiftWidth['topOrBottomRight']()
                };
                break;
            default:
                targetElPos = {
                    top: hostElPos.top - targetElHeight,
                    left: shiftWidth[pos1]()
                };
                break;
        }
        return targetElPos;
    };
    /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    PopoverContentComponent.prototype.position = /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    function (nativeEl) {
        /** @type {?} */
        var offsetParentBCR = { top: 0, left: 0 };
        /** @type {?} */
        var elBCR = this.offset(nativeEl);
        /** @type {?} */
        var offsetParentEl = this.parentOffsetEl(nativeEl);
        if (offsetParentEl !== window.document) {
            offsetParentBCR = this.offset(offsetParentEl);
            offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;
            offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;
        }
        /** @type {?} */
        var boundingClientRect = nativeEl.getBoundingClientRect();
        return {
            width: boundingClientRect.width || nativeEl.offsetWidth,
            height: boundingClientRect.height || nativeEl.offsetHeight,
            top: elBCR.top - offsetParentBCR.top,
            left: elBCR.left - offsetParentBCR.left
        };
    };
    /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    PopoverContentComponent.prototype.offset = /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    function (nativeEl) {
        /** @type {?} */
        var boundingClientRect = nativeEl.getBoundingClientRect();
        return {
            width: boundingClientRect.width || nativeEl.offsetWidth,
            height: boundingClientRect.height || nativeEl.offsetHeight,
            top: boundingClientRect.top + (window.pageYOffset || window.document.documentElement.scrollTop),
            left: boundingClientRect.left + (window.pageXOffset || window.document.documentElement.scrollLeft)
        };
    };
    /**
     * @protected
     * @param {?} nativeEl
     * @param {?} cssProp
     * @return {?}
     */
    PopoverContentComponent.prototype.getStyle = /**
     * @protected
     * @param {?} nativeEl
     * @param {?} cssProp
     * @return {?}
     */
    function (nativeEl, cssProp) {
        if (((/** @type {?} */ (nativeEl))).currentStyle) { // IE
            return ((/** @type {?} */ (nativeEl))).currentStyle[cssProp];
        }
        if (window.getComputedStyle) {
            return ((/** @type {?} */ (window.getComputedStyle)))(nativeEl)[cssProp];
        }
        // finally try and get inline style
        return ((/** @type {?} */ (nativeEl.style)))[cssProp];
    };
    /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    PopoverContentComponent.prototype.isStaticPositioned = /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    function (nativeEl) {
        return (this.getStyle(nativeEl, 'position') || 'static') === 'static';
    };
    /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    PopoverContentComponent.prototype.parentOffsetEl = /**
     * @protected
     * @param {?} nativeEl
     * @return {?}
     */
    function (nativeEl) {
        /** @type {?} */
        var offsetParent = nativeEl.offsetParent || window.document;
        while (offsetParent && offsetParent !== window.document && this.isStaticPositioned(offsetParent)) {
            offsetParent = offsetParent.offsetParent;
        }
        return offsetParent || window.document;
    };
    // Check for overflow of the viewport and reflect the position if necessary.
    // Check for overflow of the viewport and reflect the position if necessary.
    /**
     * @protected
     * @param {?} placement
     * @param {?} hostElement
     * @param {?} targetElement
     * @return {?}
     */
    PopoverContentComponent.prototype.getEffectivePlacement = 
    // Check for overflow of the viewport and reflect the position if necessary.
    /**
     * @protected
     * @param {?} placement
     * @param {?} hostElement
     * @param {?} targetElement
     * @return {?}
     */
    function (placement, hostElement, targetElement) {
        /** @type {?} */
        var hostElBoundingRect = hostElement.getBoundingClientRect();
        /** @type {?} */
        var desiredPlacement = placement || PopoverPlacement.Top;
        // Reflect appropriately if overflow.
        if (desiredPlacement === PopoverPlacement.Top) {
            /** @type {?} */
            var isTopOverflow = hostElBoundingRect.top - targetElement.offsetHeight < 0;
            /** @type {?} */
            var isRightOverflow = hostElBoundingRect.left + hostElBoundingRect.width / 2 + targetElement.offsetWidth / 2 > this.windowWidth;
            /** @type {?} */
            var isLeftOverflow = hostElBoundingRect.left + hostElBoundingRect.width / 2 - targetElement.offsetWidth / 2 < 0;
            if (isTopOverflow) {
                return PopoverPlacement.Bottom;
            }
            else if (isRightOverflow) {
                return PopoverPlacement.TopLeft;
            }
            else if (isLeftOverflow) {
                return PopoverPlacement.TopRight;
            }
        }
        if (desiredPlacement === PopoverPlacement.Bottom) {
            /** @type {?} */
            var isRightOverflow = hostElBoundingRect.left + hostElBoundingRect.width / 2 + targetElement.offsetWidth / 2 > this.windowWidth;
            /** @type {?} */
            var isLeftOverflow = hostElBoundingRect.left + hostElBoundingRect.width / 2 - targetElement.offsetWidth / 2 < 0;
            /** @type {?} */
            var isBottomOverflow = hostElBoundingRect.bottom + targetElement.offsetHeight > this.windowHeight;
            if (isBottomOverflow) {
                return PopoverPlacement.Top;
            }
            else if (isRightOverflow) {
                return PopoverPlacement.BottomLeft;
            }
            else if (isLeftOverflow) {
                return PopoverPlacement.BottomRight;
            }
        }
        if (desiredPlacement === PopoverPlacement.Left) {
            /** @type {?} */
            var isTopOverflow = hostElBoundingRect.top + hostElBoundingRect.height / 2 - targetElement.offsetHeight / 2 < 0;
            /** @type {?} */
            var isLeftOverflow = hostElBoundingRect.left - targetElement.offsetWidth < 0;
            /** @type {?} */
            var isBottomOverflow = hostElBoundingRect.top + hostElBoundingRect.height / 2 + targetElement.offsetHeight / 2 > this.windowHeight;
            if (isLeftOverflow) {
                return PopoverPlacement.Right;
            }
            else if (isTopOverflow) {
                return PopoverPlacement.BottomLeft;
            }
            else if (isBottomOverflow) {
                return PopoverPlacement.TopLeft;
            }
        }
        if (desiredPlacement === PopoverPlacement.Right) {
            /** @type {?} */
            var isTopOverflow = hostElBoundingRect.top + hostElBoundingRect.height / 2 - targetElement.offsetHeight / 2 < 0;
            /** @type {?} */
            var isRightOverflow = hostElBoundingRect.right + targetElement.offsetWidth > this.windowWidth;
            /** @type {?} */
            var isBottomOverflow = hostElBoundingRect.top + hostElBoundingRect.height / 2 + targetElement.offsetHeight / 2 > this.windowHeight;
            if (isRightOverflow) {
                return PopoverPlacement.Left;
            }
            else if (isTopOverflow) {
                return PopoverPlacement.BottomRight;
            }
            else if (isBottomOverflow) {
                return PopoverPlacement.TopRight;
            }
        }
        if (desiredPlacement === PopoverPlacement.TopRight) {
            /** @type {?} */
            var isTopOverflow = hostElBoundingRect.top - targetElement.offsetHeight < 0;
            /** @type {?} */
            var isRightOverflow = hostElBoundingRect.right + targetElement.offsetWidth > this.windowWidth;
            if (isTopOverflow && isRightOverflow) {
                return PopoverPlacement.BottomLeft;
            }
            else if (isTopOverflow) {
                return PopoverPlacement.BottomRight;
            }
            else if (isRightOverflow) {
                return PopoverPlacement.TopLeft;
            }
        }
        if (desiredPlacement === PopoverPlacement.TopLeft) {
            /** @type {?} */
            var isTopOverflow = hostElBoundingRect.top - targetElement.offsetHeight < 0;
            /** @type {?} */
            var isLeftOverflow = hostElBoundingRect.left - targetElement.offsetWidth < 0;
            if (isTopOverflow && isLeftOverflow) {
                return PopoverPlacement.BottomRight;
            }
            else if (isTopOverflow) {
                return PopoverPlacement.BottomLeft;
            }
            else if (isLeftOverflow) {
                return PopoverPlacement.TopRight;
            }
        }
        if (desiredPlacement === PopoverPlacement.BottomRight) {
            /** @type {?} */
            var isBottomOverflow = hostElBoundingRect.bottom + targetElement.offsetHeight > this.windowHeight;
            /** @type {?} */
            var isRightOverflow = hostElBoundingRect.right + targetElement.offsetWidth > this.windowWidth;
            if (isBottomOverflow && isRightOverflow) {
                return PopoverPlacement.TopLeft;
            }
            else if (isBottomOverflow) {
                return PopoverPlacement.TopRight;
            }
            else if (isRightOverflow) {
                return PopoverPlacement.BottomLeft;
            }
        }
        if (desiredPlacement === PopoverPlacement.BottomLeft) {
            /** @type {?} */
            var isBottomOverflow = hostElBoundingRect.bottom + targetElement.offsetHeight > this.windowHeight;
            /** @type {?} */
            var isLeftOverflow = hostElBoundingRect.left - targetElement.offsetWidth < 0;
            if (isBottomOverflow && isLeftOverflow) {
                return PopoverPlacement.TopRight;
            }
            else if (isBottomOverflow) {
                return PopoverPlacement.TopLeft;
            }
            else if (isLeftOverflow) {
                return PopoverPlacement.BottomRight;
            }
        }
        return desiredPlacement;
    };
    PopoverContentComponent.decorators = [
        { type: Component, args: [{
                    selector: 'popover-content',
                    template: "\n    <div #popoverDiv\n        class=\"bs-popover-{{ effectivePlacement }} popover-content popover {{ parentClass }}\"\n        [ngClass]=\"{\n            'sm': size === 'small',\n            'md-sm': size === 'medium-small',\n            'md': size === 'medium',\n            'lg': size === 'large'\n        }\"\n        [style.top.px]=\"top\"\n        [style.left.px]=\"left\"\n        [style.transition]=\"(transitionEnabled ? '0.15s opacity' : '')\"\n        [style.opacity]=\"opacity\"\n        [style.display]=\"'block'\"\n        [class.in]=\"isIn\"\n        role=\"popover\">\n            <div [hidden]=\"!closeOnMouseOutside\" class=\"virtual-area\"></div>\n            <div class=\"arrow\"></div>\n            <div class=\"popover-header\" [hidden]=\"!title\">{{ title }}</div>\n            <div class=\"popover-body\">\n                <ng-content></ng-content>\n                {{ content }}\n            </div>\n    </div>\n    "
                }] }
    ];
    /** @nocollapse */
    PopoverContentComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: Renderer2 }
    ]; };
    PopoverContentComponent.propDecorators = {
        content: [{ type: Input }],
        placement: [{ type: Input }],
        title: [{ type: Input }],
        parentClass: [{ type: Input }],
        animation: [{ type: Input }],
        closeOnClickOutside: [{ type: Input }],
        closeOnMouseOutside: [{ type: Input }],
        size: [{ type: Input }],
        popoverDiv: [{ type: ViewChild, args: ['popoverDiv',] }]
    };
    return PopoverContentComponent;
}());
export { PopoverContentComponent };
if (false) {
    /** @type {?} */
    PopoverContentComponent.prototype.content;
    /** @type {?} */
    PopoverContentComponent.prototype.placement;
    /** @type {?} */
    PopoverContentComponent.prototype.title;
    /** @type {?} */
    PopoverContentComponent.prototype.parentClass;
    /** @type {?} */
    PopoverContentComponent.prototype.animation;
    /** @type {?} */
    PopoverContentComponent.prototype.closeOnClickOutside;
    /** @type {?} */
    PopoverContentComponent.prototype.closeOnMouseOutside;
    /** @type {?} */
    PopoverContentComponent.prototype.size;
    /** @type {?} */
    PopoverContentComponent.prototype.popoverDiv;
    /** @type {?} */
    PopoverContentComponent.prototype.popover;
    /** @type {?} */
    PopoverContentComponent.prototype.onCloseFromOutside;
    /** @type {?} */
    PopoverContentComponent.prototype.top;
    /** @type {?} */
    PopoverContentComponent.prototype.left;
    /** @type {?} */
    PopoverContentComponent.prototype.isIn;
    /** @type {?} */
    PopoverContentComponent.prototype.displayType;
    /** @type {?} */
    PopoverContentComponent.prototype.effectivePlacement;
    /** @type {?} */
    PopoverContentComponent.prototype.opacity;
    /** @type {?} */
    PopoverContentComponent.prototype.transitionEnabled;
    /** @type {?} */
    PopoverContentComponent.prototype.windowWidth;
    /** @type {?} */
    PopoverContentComponent.prototype.windowHeight;
    /** @type {?} */
    PopoverContentComponent.prototype.listenClickFunc;
    /** @type {?} */
    PopoverContentComponent.prototype.listenMouseFunc;
    /** @type {?} */
    PopoverContentComponent.prototype.listenTouchFunc;
    /**
     * Closes dropdown if user clicks outside of this directive.
     * @type {?}
     */
    PopoverContentComponent.prototype.onDocumentMouseDown;
    /**
     * @type {?}
     * @protected
     */
    PopoverContentComponent.prototype.element;
    /**
     * @type {?}
     * @protected
     */
    PopoverContentComponent.prototype.cdr;
    /**
     * @type {?}
     * @protected
     */
    PopoverContentComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci1jb250ZW50LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1zbWFydC1wb3BvdmVyLyIsInNvdXJjZXMiOlsibGliL3BvcG92ZXItY29udGVudC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFLQSxPQUFPLEVBRUwsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFFTCxTQUFTLEVBQ1QsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBb0IsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV6RTtJQWlGRSw0RUFBNEU7SUFDNUUsY0FBYztJQUNkLDRFQUE0RTtJQUU1RSxpQ0FBc0IsT0FBbUIsRUFDbkIsR0FBc0IsRUFDdEIsUUFBbUI7UUFGekMsaUJBR0M7UUFIcUIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUNuQixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBdER6QixjQUFTLEdBQXFCLGdCQUFnQixDQUFDLEdBQUcsQ0FBQztRQUduRCxjQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLHdCQUFtQixHQUFHLEtBQUssQ0FBQztRQUM1Qix3QkFBbUIsR0FBRyxLQUFLLENBQUM7UUFDNUIsU0FBSSxHQUEyRCxPQUFPLENBQUM7UUFRaEYsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUN4QyxRQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFDYixTQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFDZCxTQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ2IsZ0JBQVcsR0FBRyxNQUFNLENBQUM7UUFFckIsWUFBTyxHQUFHLENBQUMsQ0FBQztRQUNaLHNCQUFpQixHQUFHLEtBQUssQ0FBQztRQUUxQixnQkFBVyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFDaEMsaUJBQVksR0FBRyxN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QiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBpcyBhIGNvbnRpbnVhdGlvbiBvZiBuZ3gtcG9wb3ZlclxuICogQFJlZmVyZW5jZSB7Z2l0aHVifSBodHRwczovL2dpdGh1Yi5jb20vcGxlZXJvY2svbmd4LXBvcG92ZXJcbiAqL1xuXG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIFJlbmRlcmVyMixcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUG9wb3ZlckRpcmVjdGl2ZSwgUG9wb3ZlclBsYWNlbWVudCB9IGZyb20gJy4vcG9wb3Zlci5kaXJlY3RpdmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwb3BvdmVyLWNvbnRlbnQnLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgI3BvcG92ZXJEaXZcbiAgICAgICAgY2xhc3M9XCJicy1wb3BvdmVyLXt7IGVmZmVjdGl2ZVBsYWNlbWVudCB9fSBwb3BvdmVyLWNvbnRlbnQgcG9wb3ZlciB7eyBwYXJlbnRDbGFzcyB9fVwiXG4gICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICdzbSc6IHNpemUgPT09ICdzbWFsbCcsXG4gICAgICAgICAgICAnbWQtc20nOiBzaXplID09PSAnbWVkaXVtLXNtYWxsJyxcbiAgICAgICAgICAgICdtZCc6IHNpemUgPT09ICdtZWRpdW0nLFxuICAgICAgICAgICAgJ2xnJzogc2l6ZSA9PT0gJ2xhcmdlJ1xuICAgICAgICB9XCJcbiAgICAgICAgW3N0eWxlLnRvcC5weF09XCJ0b3BcIlxuICAgICAgICBbc3R5bGUubGVmdC5weF09XCJsZWZ0XCJcbiAgICAgICAgW3N0eWxlLnRyYW5zaXRpb25dPVwiKHRyYW5zaXRpb25FbmFibGVkID8gJzAuMTVzIG9wYWNpdHknIDogJycpXCJcbiAgICAgICAgW3N0eWxlLm9wYWNpdHldPVwib3BhY2l0eVwiXG4gICAgICAgIFtzdHlsZS5kaXNwbGF5XT1cIidibG9jaydcIlxuICAgICAgICBbY2xhc3MuaW5dPVwiaXNJblwiXG4gICAgICAgIHJvbGU9XCJwb3BvdmVyXCI+XG4gICAgICAgICAgICA8ZGl2IFtoaWRkZW5dPVwiIWNsb3NlT25Nb3VzZU91dHNpZGVcIiBjbGFzcz1cInZpcnR1YWwtYXJlYVwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1oZWFkZXJcIiBbaGlkZGVuXT1cIiF0aXRsZVwiPnt7IHRpdGxlIH19PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1ib2R5XCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgICAgICAgICAgIHt7IGNvbnRlbnQgfX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGBcbn0pXG5leHBvcnQgY2xhc3MgUG9wb3ZlckNvbnRlbnRDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIElucHV0cyAvIE91dHB1dHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBASW5wdXQoKSBwdWJsaWMgY29udGVudDogc3RyaW5nO1xuICBASW5wdXQoKSBwdWJsaWMgcGxhY2VtZW50OiBQb3BvdmVyUGxhY2VtZW50ID0gUG9wb3ZlclBsYWNlbWVudC5Ub3A7XG4gIEBJbnB1dCgpIHB1YmxpYyB0aXRsZTogc3RyaW5nO1xuICBASW5wdXQoKSBwdWJsaWMgcGFyZW50Q2xhc3M6IHN0cmluZztcbiAgQElucHV0KCkgcHVibGljIGFuaW1hdGlvbiA9IHRydWU7XG4gIEBJbnB1dCgpIHB1YmxpYyBjbG9zZU9uQ2xpY2tPdXRzaWRlID0gZmFsc2U7XG4gIEBJbnB1dCgpIHB1YmxpYyBjbG9zZU9uTW91c2VPdXRzaWRlID0gZmFsc2U7XG4gIEBJbnB1dCgpIHB1YmxpYyBzaXplOiAnc21hbGwnIHwgJ21lZGl1bS1zbWFsbCcgfCAnbWVkaXVtJyB8ICdsYXJnZScgfCAnYXV0bycgPSAnc21hbGwnO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHJvcGVydGllc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIEBWaWV3Q2hpbGQoJ3BvcG92ZXJEaXYnKSBwdWJsaWMgcG9wb3ZlckRpdjogRWxlbWVudFJlZjtcblxuICBwdWJsaWMgcG9wb3ZlcjogUG9wb3ZlckRpcmVjdGl2ZTtcbiAgcHVibGljIG9uQ2xvc2VGcm9tT3V0c2lkZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgcHVibGljIHRvcCA9IC0xMDAwMDtcbiAgcHVibGljIGxlZnQgPSAtMTAwMDA7XG4gIHB1YmxpYyBpc0luID0gZmFsc2U7XG4gIHB1YmxpYyBkaXNwbGF5VHlwZSA9ICdub25lJztcbiAgcHVibGljIGVmZmVjdGl2ZVBsYWNlbWVudDogc3RyaW5nO1xuICBwdWJsaWMgb3BhY2l0eSA9IDA7XG4gIHB1YmxpYyB0cmFuc2l0aW9uRW5hYmxlZCA9IGZhbHNlO1xuXG4gIHB1YmxpYyB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBwdWJsaWMgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gIHB1YmxpYyBsaXN0ZW5DbGlja0Z1bmM6IGFueTtcbiAgcHVibGljIGxpc3Rlbk1vdXNlRnVuYzogYW55O1xuICBwdWJsaWMgbGlzdGVuVG91Y2hGdW5jOiBhbnk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBBbm9ueW1vdXNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgZHJvcGRvd24gaWYgdXNlciBjbGlja3Mgb3V0c2lkZSBvZiB0aGlzIGRpcmVjdGl2ZS5cbiAgICovXG4gIHB1YmxpYyBvbkRvY3VtZW50TW91c2VEb3duID0gKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgIGlmICghZWxlbWVudCB8fCAhdGhpcy5wb3BvdmVyKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSB8fCB0aGlzLnBvcG92ZXIuZ2V0RWxlbWVudCgpLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLm9uQ2xvc2VGcm9tT3V0c2lkZS5lbWl0KHVuZGVmaW5lZCk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENvbnN0cnVjdG9yXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICAgICAgICAgICAgcHJvdGVjdGVkIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICAgIHByb3RlY3RlZCByZW5kZXJlcjogUmVuZGVyZXIyKSB7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIExpZmVjeWNsZSBjYWxsYmFja3NcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHB1YmxpYyBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5jbG9zZU9uQ2xpY2tPdXRzaWRlKSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5DbGlja0Z1bmMgPSB0aGlzLnJlbmRlcmVyLmxpc3RlbignZG9jdW1lbnQnLCAnbW91c2Vkb3duJywgKGV2ZW50OiBhbnkpID0+IHRoaXMub25Eb2N1bWVudE1vdXNlRG93bihldmVudCkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY2xvc2VPbk1vdXNlT3V0c2lkZSkge1xuICAgICAgICAgIHRoaXMubGlzdGVuTW91c2VGdW5jID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oJ2RvY3VtZW50JywgJ21vdXNlb3ZlcicsIChldmVudDogYW55KSA9PiB0aGlzLm9uRG9jdW1lbnRNb3VzZURvd24oZXZlbnQpKTtcbiAgICAgIH1cbiAgICAgIC8vIEFsd2F5cyBjbG9zZSBvbiBtb2JpbGUgdG91Y2ggZXZlbnQgb3V0c2lkZS5cbiAgICAgIHRoaXMubGlzdGVuVG91Y2hGdW5jID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oJ2RvY3VtZW50JywgJ3RvdWNoc3RhcnQnLCAoZXZlbnQ6IGFueSkgPT4gdGhpcy5vbkRvY3VtZW50TW91c2VEb3duKGV2ZW50KSk7XG5cbiAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgICAgaWYgKHRoaXMuY2xvc2VPbkNsaWNrT3V0c2lkZSAmJiB0aGlzLmxpc3RlbkNsaWNrRnVuYykge1xuICAgICAgICAgIHRoaXMubGlzdGVuQ2xpY2tGdW5jKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jbG9zZU9uTW91c2VPdXRzaWRlICYmIHRoaXMubGlzdGVuTW91c2VGdW5jKSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5Nb3VzZUZ1bmMoKTtcbiAgICAgIH1cbiAgICAgIGlmICghIXRoaXMubGlzdGVuVG91Y2hGdW5jKSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5Ub3VjaEZ1bmMoKTtcbiAgICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHVibGljIE1ldGhvZHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHB1YmxpYyB1cGRhdGVQb3NpdGlvbigpOiB2b2lkIHtcbiAgICAgIC8vIGlmIHZpc2libGUsIHJlcG9zaXRpb25cbiAgICAgIGlmICh0aGlzLm9wYWNpdHkpIHtcbiAgICAgICAgICBjb25zdCBwID0gdGhpcy5wb3NpdGlvbkVsZW1lbnRzKHRoaXMucG9wb3Zlci5nZXRFbGVtZW50KCksIHRoaXMucG9wb3ZlckRpdi5uYXRpdmVFbGVtZW50LCB0aGlzLnBsYWNlbWVudCk7XG4gICAgICAgICAgdGhpcy50b3AgPSBwLnRvcDtcbiAgICAgICAgICB0aGlzLmxlZnQgPSBwLmxlZnQ7XG4gICAgICB9XG4gIH1cblxuICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcbiAgICAgIGlmICghdGhpcy5wb3BvdmVyIHx8ICF0aGlzLnBvcG92ZXIuZ2V0RWxlbWVudCgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwID0gdGhpcy5wb3NpdGlvbkVsZW1lbnRzKHRoaXMucG9wb3Zlci5nZXRFbGVtZW50KCksIHRoaXMucG9wb3ZlckRpdi5uYXRpdmVFbGVtZW50LCB0aGlzLnBsYWNlbWVudCk7XG4gICAgICB0aGlzLmRpc3BsYXlUeXBlID0gJ2Jsb2NrJztcbiAgICAgIHRoaXMudG9wID0gcC50b3A7XG4gICAgICB0aGlzLmxlZnQgPSBwLmxlZnQ7XG4gICAgICB0aGlzLmlzSW4gPSB0cnVlO1xuICAgICAgdGhpcy50cmFuc2l0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLm9wYWNpdHkgPSAxO1xuICB9XG5cbiAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gICAgICB0aGlzLnRvcCA9IC0xMDAwMDtcbiAgICAgIHRoaXMubGVmdCA9IC0xMDAwMDtcbiAgICAgIHRoaXMuaXNJbiA9IHRydWU7XG4gICAgICB0aGlzLnBvcG92ZXIuaGlkZSgpO1xuICB9XG5cbiAgcHVibGljIGhpZGVGcm9tUG9wb3ZlcigpOiB2b2lkIHtcbiAgICAgIHRoaXMudG9wID0gLTEwMDAwO1xuICAgICAgdGhpcy5sZWZ0ID0gLTEwMDAwO1xuICAgICAgdGhpcy5pc0luID0gdHJ1ZTtcbiAgICAgIHRoaXMudHJhbnNpdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMub3BhY2l0eSA9IDA7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFByb3RlY3RlZCBNZXRob2RzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBwcm90ZWN0ZWQgcG9zaXRpb25FbGVtZW50cyhob3N0RWw6IEhUTUxFbGVtZW50LCB0YXJnZXRFbDogSFRNTEVsZW1lbnQsIHBvc2l0aW9uU3RyOiBQb3BvdmVyUGxhY2VtZW50LCBhcHBlbmRUb0JvZHk6IGJvb2xlYW4gPSBmYWxzZSk6IHsgdG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlciB9IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uU3RyUGFydHMgPSAocG9zaXRpb25TdHIgYXMgc3RyaW5nKS5zcGxpdCgnICcpO1xuICAgICAgbGV0IHBvczAgPSBwb3NpdGlvblN0clBhcnRzWzBdO1xuICAgICAgY29uc3QgcG9zMSA9IHBvc2l0aW9uU3RyUGFydHNbMV0gfHwgJ2NlbnRlcic7XG4gICAgICBjb25zdCBob3N0RWxQb3MgPSBhcHBlbmRUb0JvZHkgPyB0aGlzLm9mZnNldChob3N0RWwpIDogdGhpcy5wb3NpdGlvbihob3N0RWwpO1xuICAgICAgY29uc3QgdGFyZ2V0RWxXaWR0aCA9IHRhcmdldEVsLm9mZnNldFdpZHRoO1xuICAgICAgY29uc3QgdGFyZ2V0RWxIZWlnaHQgPSB0YXJnZXRFbC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgIHRoaXMuZWZmZWN0aXZlUGxhY2VtZW50ID0gcG9zMCA9IHRoaXMuZ2V0RWZmZWN0aXZlUGxhY2VtZW50KHBvczAsIGhvc3RFbCwgdGFyZ2V0RWwpO1xuXG4gICAgICBjb25zdCBzaGlmdFdpZHRoOiBhbnkgPSB7XG4gICAgICAgICAgY2VudGVyOiBmdW5jdGlvbiAoKTogbnVtYmVyIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy5sZWZ0ICsgaG9zdEVsUG9zLndpZHRoIC8gMiAtIHRhcmdldEVsV2lkdGggLyAyO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbGVmdDogZnVuY3Rpb24gKCk6IG51bWJlciB7XG4gICAgICAgICAgICAgIHJldHVybiBob3N0RWxQb3MubGVmdDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJpZ2h0OiBmdW5jdGlvbiAoKTogbnVtYmVyIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy5sZWZ0ICsgaG9zdEVsUG9zLndpZHRoO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9wT3JCb3R0b21SaWdodDogZnVuY3Rpb24gKCk6IG51bWJlciB7XG4gICAgICAgICAgICAgIHJldHVybiBob3N0RWxQb3MubGVmdCArIGhvc3RFbFBvcy53aWR0aCAvIDI7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b3BPckJvdHRvbUxlZnQ6IGZ1bmN0aW9uICgpOiBudW1iZXIge1xuICAgICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLmxlZnQgLSB0YXJnZXRFbFdpZHRoICArIGhvc3RFbFBvcy53aWR0aCAvIDI7XG4gICAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3Qgc2hpZnRIZWlnaHQ6IGFueSA9IHtcbiAgICAgICAgICBjZW50ZXI6IGZ1bmN0aW9uICgpOiBudW1iZXIge1xuICAgICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLnRvcCArIGhvc3RFbFBvcy5oZWlnaHQgLyAyIC0gdGFyZ2V0RWxIZWlnaHQgLyAyO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9wOiBmdW5jdGlvbiAoKTogbnVtYmVyIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy50b3A7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBib3R0b206IGZ1bmN0aW9uICgpOiBudW1iZXIge1xuICAgICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLnRvcCArIGhvc3RFbFBvcy5oZWlnaHQ7XG4gICAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbGV0IHRhcmdldEVsUG9zOiB7IHRvcDogbnVtYmVyLCBsZWZ0OiBudW1iZXIgfTtcbiAgICAgIHN3aXRjaCAocG9zMCkge1xuICAgICAgICAgIGNhc2UgUG9wb3ZlclBsYWNlbWVudC5SaWdodDpcbiAgICAgICAgICAgICAgdGFyZ2V0RWxQb3MgPSB7XG4gICAgICAgICAgICAgICAgICB0b3A6IHNoaWZ0SGVpZ2h0W3BvczFdKCksXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBzaGlmdFdpZHRoW3BvczBdKClcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFBvcG92ZXJQbGFjZW1lbnQuTGVmdDpcbiAgICAgICAgICAgICAgdGFyZ2V0RWxQb3MgPSB7XG4gICAgICAgICAgICAgICAgICB0b3A6IHNoaWZ0SGVpZ2h0W3BvczFdKCksXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBob3N0RWxQb3MubGVmdCAtIHRhcmdldEVsV2lkdGhcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tOlxuICAgICAgICAgICAgICB0YXJnZXRFbFBvcyA9IHtcbiAgICAgICAgICAgICAgICAgIHRvcDogc2hpZnRIZWlnaHRbcG9zMF0oKSxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHNoaWZ0V2lkdGhbcG9zMV0oKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFBvcG92ZXJQbGFjZW1lbnQuVG9wTGVmdDpcbiAgICAgICAgICAgICAgdGFyZ2V0RWxQb3MgPSB7XG4gICAgICAgICAgICAgICAgICB0b3A6IGhvc3RFbFBvcy50b3AgLSB0YXJnZXRFbEhlaWdodCxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHNoaWZ0V2lkdGhbJ3RvcE9yQm90dG9tTGVmdCddKClcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBQb3BvdmVyUGxhY2VtZW50LlRvcFJpZ2h0OlxuICAgICAgICAgICAgICB0YXJnZXRFbFBvcyA9IHtcbiAgICAgICAgICAgICAgICAgIHRvcDogaG9zdEVsUG9zLnRvcCAtIHRhcmdldEVsSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgbGVmdDogc2hpZnRXaWR0aFsndG9wT3JCb3R0b21SaWdodCddKClcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBQb3BvdmVyUGxhY2VtZW50LkJvdHRvbUxlZnQ6XG4gICAgICAgICAgICAgIHRhcmdldEVsUG9zID0ge1xuICAgICAgICAgICAgICAgICAgdG9wOiBzaGlmdEhlaWdodFtQb3BvdmVyUGxhY2VtZW50LkJvdHRvbV0oKSxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHNoaWZ0V2lkdGhbJ3RvcE9yQm90dG9tTGVmdCddKClcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBQb3BvdmVyUGxhY2VtZW50LkJvdHRvbVJpZ2h0OlxuICAgICAgICAgICAgICB0YXJnZXRFbFBvcyA9IHtcbiAgICAgICAgICAgICAgICAgIHRvcDogc2hpZnRIZWlnaHRbUG9wb3ZlclBsYWNlbWVudC5Cb3R0b21dKCksXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBzaGlmdFdpZHRoWyd0b3BPckJvdHRvbVJpZ2h0J10oKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRhcmdldEVsUG9zID0ge1xuICAgICAgICAgICAgICAgICAgdG9wOiBob3N0RWxQb3MudG9wIC0gdGFyZ2V0RWxIZWlnaHQsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBzaGlmdFdpZHRoW3BvczFdKClcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0YXJnZXRFbFBvcztcbiAgfVxuXG4gIHByb3RlY3RlZCBwb3NpdGlvbihuYXRpdmVFbDogSFRNTEVsZW1lbnQpOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCB0b3A6IG51bWJlciwgbGVmdDogbnVtYmVyIH0ge1xuICAgICAgbGV0IG9mZnNldFBhcmVudEJDUiA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gICAgICBjb25zdCBlbEJDUiA9IHRoaXMub2Zmc2V0KG5hdGl2ZUVsKTtcbiAgICAgIGNvbnN0IG9mZnNldFBhcmVudEVsID0gdGhpcy5wYXJlbnRPZmZzZXRFbChuYXRpdmVFbCk7XG4gICAgICBpZiAob2Zmc2V0UGFyZW50RWwgIT09IHdpbmRvdy5kb2N1bWVudCkge1xuICAgICAgICAgIG9mZnNldFBhcmVudEJDUiA9IHRoaXMub2Zmc2V0KG9mZnNldFBhcmVudEVsKTtcbiAgICAgICAgICBvZmZzZXRQYXJlbnRCQ1IudG9wICs9IG9mZnNldFBhcmVudEVsLmNsaWVudFRvcCAtIG9mZnNldFBhcmVudEVsLnNjcm9sbFRvcDtcbiAgICAgICAgICBvZmZzZXRQYXJlbnRCQ1IubGVmdCArPSBvZmZzZXRQYXJlbnRFbC5jbGllbnRMZWZ0IC0gb2Zmc2V0UGFyZW50RWwuc2Nyb2xsTGVmdDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYm91bmRpbmdDbGllbnRSZWN0ID0gbmF0aXZlRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIHdpZHRoOiBib3VuZGluZ0NsaWVudFJlY3Qud2lkdGggfHwgbmF0aXZlRWwub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBib3VuZGluZ0NsaWVudFJlY3QuaGVpZ2h0IHx8IG5hdGl2ZUVsLm9mZnNldEhlaWdodCxcbiAgICAgICAgICB0b3A6IGVsQkNSLnRvcCAtIG9mZnNldFBhcmVudEJDUi50b3AsXG4gICAgICAgICAgbGVmdDogZWxCQ1IubGVmdCAtIG9mZnNldFBhcmVudEJDUi5sZWZ0XG4gICAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIG9mZnNldChuYXRpdmVFbDogYW55KTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgdG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlciB9IHtcbiAgICAgIGNvbnN0IGJvdW5kaW5nQ2xpZW50UmVjdCA9IG5hdGl2ZUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3aWR0aDogYm91bmRpbmdDbGllbnRSZWN0LndpZHRoIHx8IG5hdGl2ZUVsLm9mZnNldFdpZHRoLFxuICAgICAgICAgIGhlaWdodDogYm91bmRpbmdDbGllbnRSZWN0LmhlaWdodCB8fCBuYXRpdmVFbC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgdG9wOiBib3VuZGluZ0NsaWVudFJlY3QudG9wICsgKHdpbmRvdy5wYWdlWU9mZnNldCB8fCB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCksXG4gICAgICAgICAgbGVmdDogYm91bmRpbmdDbGllbnRSZWN0LmxlZnQgKyAod2luZG93LnBhZ2VYT2Zmc2V0IHx8IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdClcbiAgICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0U3R5bGUobmF0aXZlRWw6IEhUTUxFbGVtZW50LCBjc3NQcm9wOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgaWYgKChuYXRpdmVFbCBhcyBhbnkpLmN1cnJlbnRTdHlsZSkgeyAvLyBJRVxuICAgICAgICAgIHJldHVybiAobmF0aXZlRWwgYXMgYW55KS5jdXJyZW50U3R5bGVbY3NzUHJvcF07XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkge1xuICAgICAgICAgIHJldHVybiAod2luZG93LmdldENvbXB1dGVkU3R5bGUgYXMgYW55KShuYXRpdmVFbClbY3NzUHJvcF07XG4gICAgICB9XG5cbiAgICAgIC8vIGZpbmFsbHkgdHJ5IGFuZCBnZXQgaW5saW5lIHN0eWxlXG4gICAgICByZXR1cm4gKG5hdGl2ZUVsLnN0eWxlIGFzIGFueSlbY3NzUHJvcF07XG4gIH1cblxuICBwcm90ZWN0ZWQgaXNTdGF0aWNQb3NpdGlvbmVkKG5hdGl2ZUVsOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuICh0aGlzLmdldFN0eWxlKG5hdGl2ZUVsLCAncG9zaXRpb24nKSB8fCAnc3RhdGljJyApID09PSAnc3RhdGljJztcbiAgfVxuXG4gIHByb3RlY3RlZCBwYXJlbnRPZmZzZXRFbChuYXRpdmVFbDogSFRNTEVsZW1lbnQpOiBhbnkge1xuICAgICAgbGV0IG9mZnNldFBhcmVudDogYW55ID0gbmF0aXZlRWwub2Zmc2V0UGFyZW50IHx8IHdpbmRvdy5kb2N1bWVudDtcbiAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSB3aW5kb3cuZG9jdW1lbnQgJiYgdGhpcy5pc1N0YXRpY1Bvc2l0aW9uZWQob2Zmc2V0UGFyZW50KSkge1xuICAgICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2Zmc2V0UGFyZW50IHx8IHdpbmRvdy5kb2N1bWVudDtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBvdmVyZmxvdyBvZiB0aGUgdmlld3BvcnQgYW5kIHJlZmxlY3QgdGhlIHBvc2l0aW9uIGlmIG5lY2Vzc2FyeS5cbiAgcHJvdGVjdGVkIGdldEVmZmVjdGl2ZVBsYWNlbWVudChwbGFjZW1lbnQ6IHN0cmluZywgaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCk6IHN0cmluZyB7XG4gICAgICBjb25zdCBob3N0RWxCb3VuZGluZ1JlY3QgPSBob3N0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgY29uc3QgZGVzaXJlZFBsYWNlbWVudCA9IHBsYWNlbWVudCB8fCBQb3BvdmVyUGxhY2VtZW50LlRvcDtcblxuICAgICAgLy8gUmVmbGVjdCBhcHByb3ByaWF0ZWx5IGlmIG92ZXJmbG93LlxuICAgICAgaWYgKGRlc2lyZWRQbGFjZW1lbnQgPT09IFBvcG92ZXJQbGFjZW1lbnQuVG9wKSB7XG4gICAgICAgICAgY29uc3QgaXNUb3BPdmVyZmxvdyA9IGhvc3RFbEJvdW5kaW5nUmVjdC50b3AgLSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCA8IDA7XG4gICAgICAgICAgY29uc3QgaXNSaWdodE92ZXJmbG93ID0gaG9zdEVsQm91bmRpbmdSZWN0LmxlZnQgKyBob3N0RWxCb3VuZGluZ1JlY3Qud2lkdGggLyAyICsgdGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCAvIDIgPiB0aGlzLndpbmRvd1dpZHRoO1xuICAgICAgICAgIGNvbnN0IGlzTGVmdE92ZXJmbG93ID0gaG9zdEVsQm91bmRpbmdSZWN0LmxlZnQgKyBob3N0RWxCb3VuZGluZ1JlY3Qud2lkdGggLyAyIC0gdGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCAvIDIgPCAwO1xuXG4gICAgICAgICAgaWYgKGlzVG9wT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgIHJldHVybiBQb3BvdmVyUGxhY2VtZW50LlRvcExlZnQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Ub3BSaWdodDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzaXJlZFBsYWNlbWVudCA9PT0gUG9wb3ZlclBsYWNlbWVudC5Cb3R0b20pIHtcbiAgICAgICAgICBjb25zdCBpc1JpZ2h0T3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QubGVmdCArIGhvc3RFbEJvdW5kaW5nUmVjdC53aWR0aCAvIDIgKyB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIC8gMiA+IHRoaXMud2luZG93V2lkdGg7XG4gICAgICAgICAgY29uc3QgaXNMZWZ0T3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QubGVmdCArIGhvc3RFbEJvdW5kaW5nUmVjdC53aWR0aCAvIDIgLSB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIC8gMiA8IDA7XG4gICAgICAgICAgY29uc3QgaXNCb3R0b21PdmVyZmxvdyA9IGhvc3RFbEJvdW5kaW5nUmVjdC5ib3R0b20gKyB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCA+IHRoaXMud2luZG93SGVpZ2h0O1xuXG4gICAgICAgICAgaWYgKGlzQm90dG9tT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuVG9wO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgIHJldHVybiBQb3BvdmVyUGxhY2VtZW50LkJvdHRvbUxlZnQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Cb3R0b21SaWdodDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzaXJlZFBsYWNlbWVudCA9PT0gUG9wb3ZlclBsYWNlbWVudC5MZWZ0KSB7XG4gICAgICAgICAgY29uc3QgaXNUb3BPdmVyZmxvdyA9IGhvc3RFbEJvdW5kaW5nUmVjdC50b3AgKyBob3N0RWxCb3VuZGluZ1JlY3QuaGVpZ2h0IC8gMiAtIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMiA8IDA7XG4gICAgICAgICAgY29uc3QgaXNMZWZ0T3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QubGVmdCAtIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggPCAwO1xuICAgICAgICAgIGNvbnN0IGlzQm90dG9tT3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QudG9wICsgaG9zdEVsQm91bmRpbmdSZWN0LmhlaWdodCAvIDIgKyB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDIgPiB0aGlzLndpbmRvd0hlaWdodDtcblxuICAgICAgICAgIGlmIChpc0xlZnRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5SaWdodDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzVG9wT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tTGVmdDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQm90dG9tT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuVG9wTGVmdDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzaXJlZFBsYWNlbWVudCA9PT0gUG9wb3ZlclBsYWNlbWVudC5SaWdodCkge1xuICAgICAgICAgIGNvbnN0IGlzVG9wT3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QudG9wICsgaG9zdEVsQm91bmRpbmdSZWN0LmhlaWdodCAvIDIgLSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDIgPCAwO1xuICAgICAgICAgIGNvbnN0IGlzUmlnaHRPdmVyZmxvdyA9IGhvc3RFbEJvdW5kaW5nUmVjdC5yaWdodCArIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggPiB0aGlzLndpbmRvd1dpZHRoO1xuICAgICAgICAgIGNvbnN0IGlzQm90dG9tT3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QudG9wICsgaG9zdEVsQm91bmRpbmdSZWN0LmhlaWdodCAvIDIgKyB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAvIDIgPiB0aGlzLndpbmRvd0hlaWdodDtcblxuICAgICAgICAgIGlmIChpc1JpZ2h0T3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuTGVmdDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzVG9wT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tUmlnaHQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0JvdHRvbU92ZXJmbG93KSB7XG4gICAgICAgICAgICAgIHJldHVybiBQb3BvdmVyUGxhY2VtZW50LlRvcFJpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZXNpcmVkUGxhY2VtZW50ID09PSBQb3BvdmVyUGxhY2VtZW50LlRvcFJpZ2h0KSB7XG4gICAgICAgICAgY29uc3QgaXNUb3BPdmVyZmxvdyA9IGhvc3RFbEJvdW5kaW5nUmVjdC50b3AgLSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCA8IDA7XG4gICAgICAgICAgY29uc3QgaXNSaWdodE92ZXJmbG93ID0gaG9zdEVsQm91bmRpbmdSZWN0LnJpZ2h0ICsgdGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCA+IHRoaXMud2luZG93V2lkdGg7XG5cbiAgICAgICAgICBpZiAoaXNUb3BPdmVyZmxvdyAmJiBpc1JpZ2h0T3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tTGVmdDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzVG9wT3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tUmlnaHQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc1JpZ2h0T3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuVG9wTGVmdDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzaXJlZFBsYWNlbWVudCA9PT0gUG9wb3ZlclBsYWNlbWVudC5Ub3BMZWZ0KSB7XG4gICAgICAgICAgY29uc3QgaXNUb3BPdmVyZmxvdyA9IGhvc3RFbEJvdW5kaW5nUmVjdC50b3AgLSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCA8IDA7XG4gICAgICAgICAgY29uc3QgaXNMZWZ0T3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QubGVmdCAtIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggPCAwO1xuXG4gICAgICAgICAgaWYgKGlzVG9wT3ZlcmZsb3cgJiYgaXNMZWZ0T3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuQm90dG9tUmlnaHQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc1RvcE92ZXJmbG93KSB7XG4gICAgICAgICAgICAgIHJldHVybiBQb3BvdmVyUGxhY2VtZW50LkJvdHRvbUxlZnQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Ub3BSaWdodDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzaXJlZFBsYWNlbWVudCA9PT0gUG9wb3ZlclBsYWNlbWVudC5Cb3R0b21SaWdodCkge1xuICAgICAgICAgIGNvbnN0IGlzQm90dG9tT3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QuYm90dG9tICsgdGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQgPiB0aGlzLndpbmRvd0hlaWdodDtcbiAgICAgICAgICBjb25zdCBpc1JpZ2h0T3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QucmlnaHQgKyB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoID4gdGhpcy53aW5kb3dXaWR0aDtcblxuICAgICAgICAgIGlmIChpc0JvdHRvbU92ZXJmbG93ICYmIGlzUmlnaHRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Ub3BMZWZ0O1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNCb3R0b21PdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Ub3BSaWdodDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUmlnaHRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Cb3R0b21MZWZ0O1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZXNpcmVkUGxhY2VtZW50ID09PSBQb3BvdmVyUGxhY2VtZW50LkJvdHRvbUxlZnQpIHtcbiAgICAgICAgICBjb25zdCBpc0JvdHRvbU92ZXJmbG93ID0gaG9zdEVsQm91bmRpbmdSZWN0LmJvdHRvbSArIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gdGhpcy53aW5kb3dIZWlnaHQ7XG4gICAgICAgICAgY29uc3QgaXNMZWZ0T3ZlcmZsb3cgPSBob3N0RWxCb3VuZGluZ1JlY3QubGVmdCAtIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggPCAwO1xuXG4gICAgICAgICAgaWYgKGlzQm90dG9tT3ZlcmZsb3cgJiYgaXNMZWZ0T3ZlcmZsb3cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvcG92ZXJQbGFjZW1lbnQuVG9wUmlnaHQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0JvdHRvbU92ZXJmbG93KSB7XG4gICAgICAgICAgICAgIHJldHVybiBQb3BvdmVyUGxhY2VtZW50LlRvcExlZnQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRPdmVyZmxvdykge1xuICAgICAgICAgICAgICByZXR1cm4gUG9wb3ZlclBsYWNlbWVudC5Cb3R0b21SaWdodDtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXNpcmVkUGxhY2VtZW50O1xuICB9XG59XG4iXX0=