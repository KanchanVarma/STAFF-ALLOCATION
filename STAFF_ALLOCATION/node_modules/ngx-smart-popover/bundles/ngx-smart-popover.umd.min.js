!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-smart-popover",["exports","@angular/core","@angular/common"],e):e(t["ngx-smart-popover"]={},t.ng.core,t.ng.common)}(this,function(t,n,e){"use strict";var o=function(){function t(t,e,o){var i=this;this.element=t,this.cdr=e,this.renderer=o,this.placement=d.Top,this.animation=!0,this.closeOnClickOutside=!1,this.closeOnMouseOutside=!1,this.size="small",this.onCloseFromOutside=new n.EventEmitter,this.top=-1e4,this.left=-1e4,this.isIn=!1,this.displayType="none",this.opacity=0,this.transitionEnabled=!1,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.onDocumentMouseDown=function(t){var e=i.element.nativeElement;e&&i.popover&&(e.contains(t.target)||i.popover.getElement().contains(t.target)||i.onCloseFromOutside.emit(undefined))}}return t.prototype.ngAfterViewInit=function(){var e=this;this.closeOnClickOutside&&(this.listenClickFunc=this.renderer.listen("document","mousedown",function(t){return e.onDocumentMouseDown(t)})),this.closeOnMouseOutside&&(this.listenMouseFunc=this.renderer.listen("document","mouseover",function(t){return e.onDocumentMouseDown(t)})),this.listenTouchFunc=this.renderer.listen("document","touchstart",function(t){return e.onDocumentMouseDown(t)}),this.show(),this.cdr.detectChanges()},t.prototype.ngOnDestroy=function(){this.closeOnClickOutside&&this.listenClickFunc&&this.listenClickFunc(),this.closeOnMouseOutside&&this.listenMouseFunc&&this.listenMouseFunc(),this.listenTouchFunc&&this.listenTouchFunc()},t.prototype.updatePosition=function(){if(this.opacity){var t=this.positionElements(this.popover.getElement(),this.popoverDiv.nativeElement,this.placement);this.top=t.top,this.left=t.left}},t.prototype.show=function(){if(this.popover&&this.popover.getElement()){var t=this.positionElements(this.popover.getElement(),this.popoverDiv.nativeElement,this.placement);this.displayType="block",this.top=t.top,this.left=t.left,this.isIn=!0,this.transitionEnabled=!0,this.opacity=1}},t.prototype.hide=function(){this.top=-1e4,this.left=-1e4,this.isIn=!0,this.popover.hide()},t.prototype.hideFromPopover=function(){this.top=-1e4,this.left=-1e4,this.isIn=!0,this.transitionEnabled=!1,this.opacity=0},t.prototype.positionElements=function(t,e,o,i){void 0===i&&(i=!1);var n=o.split(" "),s=n[0],r=n[1]||"center",p=i?this.offset(t):this.position(t),h=e.offsetWidth,f=e.offsetHeight;this.effectivePlacement=s=this.getEffectivePlacement(s,t,e);var u,l={center:function(){return p.left+p.width/2-h/2},left:function(){return p.left},right:function(){return p.left+p.width},topOrBottomRight:function(){return p.left+p.width/2},topOrBottomLeft:function(){return p.left-h+p.width/2}},c={center:function(){return p.top+p.height/2-f/2},top:function(){return p.top},bottom:function(){return p.top+p.height}};switch(s){case d.Right:u={top:c[r](),left:l[s]()};break;case d.Left:u={top:c[r](),left:p.left-h};break;case d.Bottom:u={top:c[s](),left:l[r]()};break;case d.TopLeft:u={top:p.top-f,left:l.topOrBottomLeft()};break;case d.TopRight:u={top:p.top-f,left:l.topOrBottomRight()};break;case d.BottomLeft:u={top:c[d.Bottom](),left:l.topOrBottomLeft()};break;case d.BottomRight:u={top:c[d.Bottom](),left:l.topOrBottomRight()};break;default:u={top:p.top-f,left:l[r]()}}return u},t.prototype.position=function(t){var e={top:0,left:0},o=this.offset(t),i=this.parentOffsetEl(t);i!==window.document&&((e=this.offset(i)).top+=i.clientTop-i.scrollTop,e.left+=i.clientLeft-i.scrollLeft);var n=t.getBoundingClientRect();return{width:n.width||t.offsetWidth,height:n.height||t.offsetHeight,top:o.top-e.top,left:o.left-e.left}},t.prototype.offset=function(t){var e=t.getBoundingClientRect();return{width:e.width||t.offsetWidth,height:e.height||t.offsetHeight,top:e.top+(window.pageYOffset||window.document.documentElement.scrollTop),left:e.left+(window.pageXOffset||window.document.documentElement.scrollLeft)}},t.prototype.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t)[e]:t.style[e]},t.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},t.prototype.parentOffsetEl=function(t){for(var e=t.offsetParent||window.document;e&&e!==window.document&&this.isStaticPositioned(e);)e=e.offsetParent;return e||window.document},t.prototype.getEffectivePlacement=function(t,e,o){var i=e.getBoundingClientRect(),n=t||d.Top;if(n===d.Top){var s=i.top-o.offsetHeight<0,r=i.left+i.width/2+o.offsetWidth/2>this.windowWidth,p=i.left+i.width/2-o.offsetWidth/2<0;if(s)return d.Bottom;if(r)return d.TopLeft;if(p)return d.TopRight}if(n===d.Bottom){r=i.left+i.width/2+o.offsetWidth/2>this.windowWidth,p=i.left+i.width/2-o.offsetWidth/2<0;if(h=i.bottom+o.offsetHeight>this.windowHeight)return d.Top;if(r)return d.BottomLeft;if(p)return d.BottomRight}if(n===d.Left){s=i.top+i.height/2-o.offsetHeight/2<0,p=i.left-o.offsetWidth<0;var h=i.top+i.height/2+o.offsetHeight/2>this.windowHeight;if(p)return d.Right;if(s)return d.BottomLeft;if(h)return d.TopLeft}if(n===d.Right){s=i.top+i.height/2-o.offsetHeight/2<0,r=i.right+o.offsetWidth>this.windowWidth,h=i.top+i.height/2+o.offsetHeight/2>this.windowHeight;if(r)return d.Left;if(s)return d.BottomRight;if(h)return d.TopRight}if(n===d.TopRight){s=i.top-o.offsetHeight<0,r=i.right+o.offsetWidth>this.windowWidth;if(s&&r)return d.BottomLeft;if(s)return d.BottomRight;if(r)return d.TopLeft}if(n===d.TopLeft){s=i.top-o.offsetHeight<0,p=i.left-o.offsetWidth<0;if(s&&p)return d.BottomRight;if(s)return d.BottomLeft;if(p)return d.TopRight}if(n===d.BottomRight){h=i.bottom+o.offsetHeight>this.windowHeight,r=i.right+o.offsetWidth>this.windowWidth;if(h&&r)return d.TopLeft;if(h)return d.TopRight;if(r)return d.BottomLeft}if(n===d.BottomLeft){h=i.bottom+o.offsetHeight>this.windowHeight,p=i.left-o.offsetWidth<0;if(h&&p)return d.TopRight;if(h)return d.TopLeft;if(p)return d.BottomRight}return n},t.decorators=[{type:n.Component,args:[{selector:"popover-content",template:'\n    <div #popoverDiv\n        class="bs-popover-{{ effectivePlacement }} popover-content popover {{ parentClass }}"\n        [ngClass]="{\n            \'sm\': size === \'small\',\n            \'md-sm\': size === \'medium-small\',\n            \'md\': size === \'medium\',\n            \'lg\': size === \'large\'\n        }"\n        [style.top.px]="top"\n        [style.left.px]="left"\n        [style.transition]="(transitionEnabled ? \'0.15s opacity\' : \'\')"\n        [style.opacity]="opacity"\n        [style.display]="\'block\'"\n        [class.in]="isIn"\n        role="popover">\n            <div [hidden]="!closeOnMouseOutside" class="virtual-area"></div>\n            <div class="arrow"></div>\n            <div class="popover-header" [hidden]="!title">{{ title }}</div>\n            <div class="popover-body">\n                <ng-content></ng-content>\n                {{ content }}\n            </div>\n    </div>\n    '}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.Renderer2}]},t.propDecorators={content:[{type:n.Input}],placement:[{type:n.Input}],title:[{type:n.Input}],parentClass:[{type:n.Input}],animation:[{type:n.Input}],closeOnClickOutside:[{type:n.Input}],closeOnMouseOutside:[{type:n.Input}],size:[{type:n.Input}],popoverDiv:[{type:n.ViewChild,args:["popoverDiv"]}]},t}(),d=function(){function t(){}return t.Bottom="bottom",t.BottomLeft="bottom-left",t.BottomRight="bottom-right",t.Left="left",t.Right="right",t.Top="top",t.TopLeft="top-left",t.TopRight="top-right",t}(),i=function(){function t(t,e){this.viewContainerRef=t,this.resolver=e,this.popoverContentComponent=o,this.popoverOnHover=!0,this.popoverDismissTimeout=0,this.onShown=new n.EventEmitter,this.onHidden=new n.EventEmitter}return t.prototype.showOrHideOnClick=function(t){this.popoverOnHover||this.popoverDisabled||(t.stopImmediatePropagation(),this.toggle())},t.prototype.showOrHideOnTouch=function(t){t.stopImmediatePropagation(),this.popoverOnHover&&(this.popoverDisabled||this.toggle())},t.prototype.showOnHover=function(){this.popoverOnHover&&(this.popoverDisabled||this.show())},t.prototype.hideOnHover=function(){this.popoverCloseOnMouseOutside||this.popoverOnHover&&(this.popoverDisabled||this.hide())},t.prototype.ngOnChanges=function(t){t.popoverDisabled&&t.popoverDisabled.currentValue&&this.hide()},t.prototype.toggle=function(){this.visible?this.hide():this.show()},t.prototype.show=function(){var t=this;if(!this.visible){if(this.visible=!0,"string"==typeof this.content){var e=this.resolver.resolveComponentFactory(this.popoverContentComponent);if(!this.visible)return;this.popover=this.viewContainerRef.createComponent(e),(o=this.popover.instance).popover=this,o.content=this.content,this.popoverPlacement!==undefined&&(o.placement=this.popoverPlacement),this.popoverAnimation!==undefined&&(o.animation=this.popoverAnimation),this.popoverTitle!==undefined&&(o.title=this.popoverTitle),this.popoverCloseOnClickOutside!==undefined&&(o.closeOnClickOutside=this.popoverCloseOnClickOutside),this.popoverCloseOnMouseOutside!==undefined&&(o.closeOnMouseOutside=this.popoverCloseOnMouseOutside),this.popoverSize&&(o.size=this.popoverSize),o.onCloseFromOutside.subscribe(function(){return t.hide()}),0<this.popoverDismissTimeout&&setTimeout(function(){return t.hide()},this.popoverDismissTimeout)}else{var o;((o=this.content).popover=this).popoverPlacement!==undefined&&(o.placement=this.popoverPlacement),this.popoverAnimation!==undefined&&(o.animation=this.popoverAnimation),this.popoverTitle!==undefined&&(o.title=this.popoverTitle),this.popoverCloseOnClickOutside!==undefined&&(o.closeOnClickOutside=this.popoverCloseOnClickOutside),this.popoverCloseOnMouseOutside!==undefined&&(o.closeOnMouseOutside=this.popoverCloseOnMouseOutside),this.popoverSize&&(o.size=this.popoverSize),o.onCloseFromOutside.subscribe(function(){return t.hide()}),0<this.popoverDismissTimeout&&setTimeout(function(){return t.hide()},this.popoverDismissTimeout),o.show()}this.onShown.emit(this)}},t.prototype.hide=function(){this.visible&&(this.visible=!1,this.popover&&this.popover.destroy(),this.content instanceof o&&this.content.hideFromPopover(),this.onHidden.emit(this))},t.prototype.getElement=function(){return this.viewContainerRef.element.nativeElement},t.decorators=[{type:n.Directive,args:[{selector:"[popover]",exportAs:"popover"}]}],t.ctorParameters=function(){return[{type:n.ViewContainerRef},{type:n.ComponentFactoryResolver}]},t.propDecorators={content:[{type:n.Input,args:["popover"]}],popoverSize:[{type:n.Input}],popoverDisabled:[{type:n.Input}],popoverAnimation:[{type:n.Input}],popoverPlacement:[{type:n.Input}],popoverTitle:[{type:n.Input}],popoverOnHover:[{type:n.Input}],popoverCloseOnClickOutside:[{type:n.Input}],popoverCloseOnMouseOutside:[{type:n.Input}],popoverDismissTimeout:[{type:n.Input}],onShown:[{type:n.Output}],onHidden:[{type:n.Output}],showOrHideOnClick:[{type:n.HostListener,args:["click",["$event"]]}],showOrHideOnTouch:[{type:n.HostListener,args:["touchend",["$event"]]}],showOnHover:[{type:n.HostListener,args:["focusin"]},{type:n.HostListener,args:["mouseenter"]}],hideOnHover:[{type:n.HostListener,args:["focusout"]},{type:n.HostListener,args:["mouseleave"]}]},t}(),s=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[i,o],imports:[e.CommonModule],exports:[o,i],entryComponents:[o]}]}],t}();t.PopoverModule=s,t.PopoverContentComponent=o,t.PopoverPlacement=d,t.PopoverDirective=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-smart-popover.umd.min.js.map